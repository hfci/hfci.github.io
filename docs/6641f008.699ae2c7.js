(window.webpackJsonp=window.webpackJsonp||[]).push([[119,115],{170:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return b}));var r=t(2),a=(t(0),t(339)),o=t(63);const c={id:"nodeMultipleProgressUse",title:"\u4f7f\u7528\uff1a\u591a\u8fdb\u7a0b/\u7ebf\u7a0b",hide_title:!0,sidebar_label:"\u4f7f\u7528\uff1a\u591a\u8fdb\u7a0b/\u7ebf\u7a0b"},l={unversionedId:"node/skill/nodeMultipleProgressUse",id:"node/skill/nodeMultipleProgressUse",isDocsHomePage:!1,title:"\u4f7f\u7528\uff1a\u591a\u8fdb\u7a0b/\u7ebf\u7a0b",description:"\u5f00\u542f\u591a\u8fdb\u7a0b\u7684\u65b9\u5f0f",source:"@site/docs/node/skill/multiple-progress-use.md",slug:"/node/skill/nodeMultipleProgressUse",permalink:"/docs/node/skill/nodeMultipleProgressUse",version:"current",sidebar_label:"\u4f7f\u7528\uff1a\u591a\u8fdb\u7a0b/\u7ebf\u7a0b",sidebar:"nodedoc",previous:{title:"\u7406\u89e3\uff1a\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u5e76\u53d1\u3001\u5e76\u884c",permalink:"/docs/node/skill/nodeMultipleProgressContent"},next:{title:"debug",permalink:"/docs/node/skill/nodeDebug"}},i=[{value:"\u5f00\u542f\u591a\u8fdb\u7a0b\u7684\u65b9\u5f0f",id:"\u5f00\u542f\u591a\u8fdb\u7a0b\u7684\u65b9\u5f0f",children:[]},{value:"child_process",id:"child_process",children:[{value:"fork",id:"fork",children:[]}]},{value:"\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u65b9\u5f0f",id:"\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u65b9\u5f0f",children:[{value:"\u4fe1\u53f7",id:"\u4fe1\u53f7",children:[]},{value:"\u5957\u63a5\u5b57(socket)",id:"\u5957\u63a5\u5b57socket",children:[]},{value:"\u547d\u540d\u7ba1\u9053",id:"\u547d\u540d\u7ba1\u9053",children:[]},{value:"\u539f\u751f\u901a\u4fe1\u65b9\u5f0f\uff1a\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4",id:"\u539f\u751f\u901a\u4fe1\u65b9\u5f0f\uff1a\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4",children:[]},{value:"\u901a\u4fe1\u65b9\u5f0f\uff1a\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4",id:"\u901a\u4fe1\u65b9\u5f0f\uff1a\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4",children:[]}]},{value:"\u5f00\u542f\u591a\u7ebf\u7a0b",id:"\u5f00\u542f\u591a\u7ebf\u7a0b",children:[]},{value:"\u53c2\u8003",id:"\u53c2\u8003",children:[]}],s={rightToc:i};function b({components:e,...n}){return Object(a.b)("wrapper",Object(r.a)({},s,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"\u5f00\u542f\u591a\u8fdb\u7a0b\u7684\u65b9\u5f0f"},"\u5f00\u542f\u591a\u8fdb\u7a0b\u7684\u65b9\u5f0f"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u5185\u90e8\u901a\u8fc7\u4e24\u4e2a\u5e93\u521b\u5efa\u5b50\u8fdb\u7a0b\uff1a",Object(a.b)("inlineCode",{parentName:"p"},"child_process")," \u548c ",Object(a.b)("inlineCode",{parentName:"p"},"cluster"))),Object(a.b)("h2",{id:"child_process"},"child_process"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"child_process")," \u6a21\u5757\u63d0\u4f9b\u4e86\u56db\u4e2a\u521b\u5efa\u5b50\u8fdb\u7a0b\u7684\u51fd\u6570\uff1a",Object(a.b)("inlineCode",{parentName:"p"},"spawn")," \u3001",Object(a.b)("inlineCode",{parentName:"p"},"execFile")," \u3001",Object(a.b)("inlineCode",{parentName:"p"},"exec")," \u3001",Object(a.b)("inlineCode",{parentName:"p"},"fork")),Object(a.b)("h3",{id:"fork"},"fork"),Object(a.b)(o.default,{mdxType:"Fork"}),Object(a.b)("h2",{id:"\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u65b9\u5f0f"},"\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u65b9\u5f0f"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u8bd5\u60f3\u6709\u4ee5\u4e0b\u4e24\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\uff0c\u5b83\u4eec\u901a\u8fc7\u6267\u884c\u4e24\u4e2a ",Object(a.b)("inlineCode",{parentName:"p"},"js")," \u6587\u4ef6\u521b\u5efa\uff0c\u90a3\u4e48\u5982\u4f55\u5728\u5b83\u4eec\u4e4b\u95f4\u4f20\u9012\u4fe1\u606f\u5462\uff1f")),Object(a.b)("h3",{id:"\u4fe1\u53f7"},"\u4fe1\u53f7"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u4fe1\u53f7\u662f\u4e00\u79cd\u901a\u4fe1\u673a\u5236\uff0c\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4f1a\u63a5\u53d7\u5e76\u5904\u7406\u4e00\u7cfb\u5217\u4fe1\u53f7\uff0c\u5e76\u4e14\u53ef\u4ee5\u53d1\u9001\u4fe1\u53f7\u3002")),Object(a.b)("h4",{id:"\u53d1\u9001\u4fe1\u53f7"},"\u53d1\u9001\u4fe1\u53f7"),Object(a.b)("p",null,"\u53ef\u4ee5\u901a\u8fc7 ",Object(a.b)("inlineCode",{parentName:"p"},"kill")," \u6307\u4ee4\u5411\u6307\u5b9a\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u5982\u4e0b\u4f8b\u5b50\u8868\u793a\u5411 ",Object(a.b)("inlineCode",{parentName:"p"},"pid")," \u4e3a ",Object(a.b)("inlineCode",{parentName:"p"},"3000")," \u7684\u8fdb\u7a0b\u53d1\u9001 ",Object(a.b)("inlineCode",{parentName:"p"},"USR2")," \u4fe1\u53f7\uff08\u7528\u6237\u81ea\u5b9a\u4e49\u4fe1\u53f7\uff09"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"// shell\u6307\u4ee4\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\n$ kill -USR2 3000\n")),Object(a.b)("h4",{id:"\u63a5\u6536\u4fe1\u53f7"},"\u63a5\u6536\u4fe1\u53f7"),Object(a.b)("p",null,"\u5b9a\u4e49 ",Object(a.b)("inlineCode",{parentName:"p"},"process")," \u5728\u6307\u5b9a\u4fe1\u53f7\u4e8b\u4ef6\u65f6\uff0c\u6267\u884c\u5904\u7406\u51fd\u6570\u5373\u53ef\u63a5\u6536\u5e76\u5904\u7406\u4fe1\u53f7\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"process.on('SIGUSR2', () => {\n  console.log(\"\u63a5\u6536\u5230\u4e86\u4fe1\u53f7USR2\");\n}\n")),Object(a.b)("div",{className:"admonition admonition-danger alert alert--danger"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"danger")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"\u5728\u6536\u5230\u672a\u5b9a\u4e49\u5904\u7406\u51fd\u6570\u7684\u4fe1\u53f7\u65f6\u8fdb\u7a0b\u4f1a\u76f4\u63a5\u9000\u51fa"))),Object(a.b)("p",null,"\u5b8c\u6574\u5217\u5b50\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="\u63a5\u6536\u4fe1\u53f7"',title:'"\u63a5\u6536\u4fe1\u53f7"'}),"console.log('PID', process.pid) // 58666\n\nsetInterval(() => {\n  console.log('PROCESS 1 is alive')\n}, 5000)\n\nprocess.on('SIGUSR2', () => {\n  console.log('\u6536\u5230\u4e86USR2\u4fe1\u53f7')\n})\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="\u53d1\u9001\u4fe1\u53f7"',title:'"\u53d1\u9001\u4fe1\u53f7"'}),"const ChildProcess = require('child_process')\n\nconsole.log('PID', process.pid)\n\nsetInterval(() => {\n  console.log('PROCESS 2 is alive')\n}, 5000)\n\nChildProcess.exec('kill -USR2 58666')\n")),Object(a.b)("h3",{id:"\u5957\u63a5\u5b57socket"},"\u5957\u63a5\u5b57(socket)"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u901a\u8fc7\u5728\u63a5\u53d7\u65b9\u548c\u53d1\u9001\u65b9\u4e4b\u95f4\u5efa\u7acb socket \u8fde\u63a5\u5b9e\u73b0\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u4f8b\u5982\u5728\u4e24\u8005\u95f4\u5efa\u7acb TCP \u8fde\u63a5\uff1a")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// Server\nconst net = require('net')\n\nlet server = net.createServer(client => {\n  client.on('data', msg => {\n    console.log('ONCE', String(msg))\n    client.write('server send message')\n  })\n})\nserver.listen(8087)\n\n// Client\nconst net = require('net')\nconst client = new net.Socket()\nclient.connect('8087', '127.0.0.1')\nclient.on('data', data => console.log(String(data)))\nclient.write('client send message')\n")),Object(a.b)("h3",{id:"\u547d\u540d\u7ba1\u9053"},"\u547d\u540d\u7ba1\u9053"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u547d\u540d\u7ba1\u9053\u53ef\u4ee5\u5728\u4e0d\u76f8\u5173\u7684\u8fdb\u7a0b\u4e4b\u95f4\u548c\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u4e4b\u95f4\u4f7f\u7528\uff0c\u5efa\u7acb\u547d\u540d\u7ba1\u9053\u65f6\u7ed9\u4ed6\u6307\u5b9a\u4e00\u4e2a\u540d\u5b57\uff0c\u4efb\u4f55\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u4f7f\u7528\u540d\u5b57\u5c06\u5176\u6253\u5f00\uff0c\u6839\u636e\u7ed9\u5b9a\u6743\u9650\u8fdb\u884c\u901a\u4fe1\u3002")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell",metastring:'title="\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u547d\u540d\u7ba1\u9053/tmp/nfifo"',title:'"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u547d\u540d\u7ba1\u9053/tmp/nfifo"'}),"mkfifo /tmp/nfifo\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="\u8bfb\u5199\u6587\u4ef6"',title:'"\u8bfb\u5199\u6587\u4ef6"'}),"// Server\nconst fs = require('fs')\nfs.writeFile('/tmp/tmpipe', 'info to send', (data, err) => console.log(data, err))\n\n// Client\nconst fs = require('fs')\nfs.readFile('/tmp/tmpipe', (err, data) => {\n  console.log(err, String(data))\n})\n")),Object(a.b)("div",{className:"admonition admonition-danger alert alert--danger"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"danger")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"\u4e0e\u8bfb\u53d6\u4e00\u822c\u7684\u6587\u4ef6\u4e0d\u540c\uff0c\u8bfb\u53d6\u4e00\u822c\u7684\u6587\u4ef6\u4f1a\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\uff0c\u800c\u8bfb\u53d6 fifo \u5219\u4f1a\u7b49\u5f85\uff0c\u5728 fifo \u6709\u6570\u636e\u5199\u5165\u65f6\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u5f00\u542f server\uff0cserver \u5411 fifo \u4e2d\u5199\u5165\u4fe1\u606f\uff0cclient \u5c06\u6536\u5230\u4fe1\u606f"))),Object(a.b)("h3",{id:"\u539f\u751f\u901a\u4fe1\u65b9\u5f0f\uff1a\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4"},"\u539f\u751f\u901a\u4fe1\u65b9\u5f0f\uff1a\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u521b\u5efa\u8fdb\u7a0b\u65f6\u4fbf\u5b9e\u73b0\u4e86\u5176\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u4f46\u8fd9\u79cd\u65b9\u5f0f\u53ea\u80fd\u591f\u7528\u4e8e\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1")),Object(a.b)("p",null,"\u539f\u751f\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u5728 ",Object(a.b)("inlineCode",{parentName:"p"},"windows")," \u4e2d\u4f7f\u7528\u547d\u540d\u7ba1\u9053\u5b9e\u73b0\uff0c\u5728 ",Object(a.b)("inlineCode",{parentName:"p"},"* nix")," \u7cfb\u7edf\u91c7\u7528 ",Object(a.b)("inlineCode",{parentName:"p"},"unix domain socket\uff08\u5957\u63a5\u5b57\uff09"),"\u5b9e\u73b0\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u5b9e\u73b0\u5168\u53cc\u5de5\u901a\u4fe1\uff0c",Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u5bf9\u8fd9\u4e9b\u5e95\u5c42\u5b9e\u73b0\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u8868\u73b0\u5728\u5e94\u7528\u5c42\u4e0a\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u53ea\u6709\u7b80\u5355\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"message")," \u4e8b\u4ef6\u548c ",Object(a.b)("inlineCode",{parentName:"p"},"send ()")," \u65b9\u6cd5\uff0c\u4f8b\u5982\u7236\u5b50\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// \u4e3b\u8fdb\u7a0b process.js\nconst fork = require('child_process').fork\nconst worker = fork('./child_process.js')\nworker.send('start')\nworker.on('message', msg => {\n  console.log(`SERVER RECEIVED: ${msg}`)\n})\n\n// \u5b50\u8fdb\u7a0b child_process.js\nprocess.on('message', msg => {\n  console.log('CLIENT RECEIVED', msg)\n  process.send('done')\n})\n")),Object(a.b)("h3",{id:"\u901a\u4fe1\u65b9\u5f0f\uff1a\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4"},"\u901a\u4fe1\u65b9\u5f0f\uff1a\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4"),Object(a.b)("p",null,"Node.js \u521b\u5efa\u8fdb\u7a0b\u65f6\u4fbf\u5b9e\u73b0\u4e86\u5176\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u4f46\u8fd9\u79cd\u65b9\u5f0f\u53ea\u80fd\u591f\u7528\u4e8e\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u800c\u4e0d\u80fd\u5728\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\uff0c\u82e5\u8981\u5229\u7528\u539f\u751f\u7684\u65b9\u5f0f\u5b9e\u73b0\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u5219\u9700\u8981\u501f\u52a9\u5b83\u4eec\u516c\u5171\u7684\u7236\u8fdb\u7a0b\uff0c\u53d1\u9001\u6d88\u606f\u7684\u5b50\u8fdb\u7a0b\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u7236\u8fdb\u7a0b\uff0c\u7136\u540e\u7236\u8fdb\u7a0b\u6536\u5230\u6d88\u606f\u65f6\u5c06\u6d88\u606f\u8f6c\u53d1\u7ed9\u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\u3002\u4f46\u662f\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u7ecf\u8fc7\u7236\u8fdb\u7a0b\u7684\u8f6c\u53d1\u6548\u7387\u4f4e\u4e0b\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6839\u636e Node.js \u539f\u751f\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u65b9\u5f0f\u5b9e\u73b0\u5144\u5f1f\u8fdb\u7a0b\u7684\u901a\u4fe1\uff1a\u5728 windows \u4e0a\u4f7f\u7528\u547d\u540d\u7ba1\u9053\uff0c\u5728 ","*"," nix \u4e0a\u4f7f\u7528 unix \u57df\u5957\u63a5\u5b57\uff0c\u8be5\u65b9\u6cd5\u4e0e\u4e0a\u6587\u5957\u63a5\u5b57\u901a\u4fe1\u7c7b\u4f3c\uff0c\u53ea\u662f\u8fd9\u91cc\u4e0d\u662f\u76d1\u542c\u4e00\u4e2a\u7aef\u53e3\uff0c\u800c\u662f\u4f7f\u7528\u4e00\u4e2a\u6587\u4ef6\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// Server\nconst net = require('net')\nlet server = net.createServer(() => {\n  console.log('Server start')\n})\nserver.on('connection', client => {\n  client.on('data', msg => {\n    console.log(String(msg))\n    client.write('server send message')\n  })\n})\nserver.listen('/tmp/unix.sock')\n\n// Client\nconst net = require('net')\nconst client = new net.Socket()\nclient.connect('/tmp/unix.sock')\nclient.on('data', data => console.log(String(data)))\nclient.write('client send message')\n")),Object(a.b)("p",null,"\u542f\u52a8 server \u540e\u4f1a\u5728\u6307\u5b9a\u8def\u5f84\u521b\u5efa\u6587\u4ef6\uff0c\u7528\u4e8e ipc \u901a\u4fe1\u3002"),Object(a.b)("h2",{id:"\u5f00\u542f\u591a\u7ebf\u7a0b"},"\u5f00\u542f\u591a\u7ebf\u7a0b"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u800c\u7ebf\u7a0b\u5219\u662f CPU \u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u4f7f\u7528\u591a\u7ebf\u7a0b\u80fd\u591f\u5145\u5206\u5229\u7528 CPU \u7684\u591a\u6838\u7279\u6027\uff0c\u5728\u6bcf\u4e00\u4e2a\u6838\u5fc3\u4e2d\u6267\u884c\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u591a\u7ebf\u7a0b\u5e76\u884c\u6267\u884c\uff0c\u63d0\u9ad8 CPU \u7684\u5229\u7528\u7387\uff0c\u9002\u5408\u7528\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3002")),Object(a.b)("p",null,"\u5728 ",Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u4e2d\uff0c\u5185\u7f6e\u4e86\u7528\u4e8e\u5b9e\u73b0\u591a\u7ebf\u7a0b\u7684\u6a21\u5757 ",Object(a.b)("inlineCode",{parentName:"p"},"worker_threads")," \uff0c\u8be5\u6a21\u5757\u63d0\u4f9b\u4e86\u5982\u4e0b\u65b9\u6cd5 / \u53d8\u91cf\uff1a"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"isMainThread"),"\uff1a\u5f53\u7ebf\u7a0b\u4e0d\u8fd0\u884c\u5728 Worker \u7ebf\u7a0b\u4e2d\u65f6\uff0c\u4e3a true\u3002")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"Worker \u7c7b"),"\uff1a\u4ee3\u8868\u72ec\u7acb\u7684 javascript \u6267\u884c\u7ebf\u7a0b\uff1a")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"parentPort"),"\uff1a\u7528\u4e8e\u7236\u5b50\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4fe1\u606f\u4f20\u8f93\uff1a"))),Object(a.b)("p",null,Object(a.b)("img",{alt:"thread-api-useful",src:t(570).default})),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// \u5b50\u7ebf\u7a0b -> \u7236\u7ebf\u7a0b\n// \u5b50\u7ebf\u7a0b\u4e2d\nconst { parentPort } = require('worker_threads');\nparentPort.postMessage(`msg`);\n// \u7236\u7ebf\u7a0b\u4e2d\nconst { Worker } = require('worker_threads');\nconst worker = new Worker('filepath');\nworker.on('message', (msg) => { console.log(msg) });\n\n// \u7236\u7ebf\u7a0b -> \u5b50\u7ebf\u7a0b\n// \u7236\u7ebf\u7a0b\u4e2d\nconst { Worker } = require('worker_threads');\nconst worker = new Worker('filepath');\nworker.postMessage(`msg`);\n// \u5b50\u7ebf\u7a0b\u4e2d\nconst { parentPort } = require('worker_threads');\nparentPort.on('message', (msg) =>console.log(msg));\n")),Object(a.b)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://mp.weixin.qq.com/s/s3DeAxrEbVmqtCHGP9lstg"}),"Node.js \u591a\u8fdb\u7a0b/\u7ebf\u7a0b \u2014\u2014 \u65e5\u5fd7\u7cfb\u7edf\u67b6\u6784\u4f18\u5316\u5b9e\u8df5")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.zhihu.com/question/25532384"}),"\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f"))))}b.isMDXComponent=!0},339:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),b=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=b(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},u=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),p=b(t),u=r,m=p["".concat(c,".").concat(u)]||p[u]||d[u]||o;return t?a.a.createElement(m,l(l({ref:n},s),{},{components:t})):a.a.createElement(m,l({ref:n},s))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,c=new Array(o);c[0]=u;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,c[1]=l;for(var s=2;s<o;s++)c[s]=t[s];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},397:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/child_process_fork-d534354177e226925c36fe4fc16b6358.png"},570:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/thread_api_useful-0fb84d7be922ee003288ecc1377af621.png"},63:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return s}));var r=t(2),a=(t(0),t(339));const o={},c={unversionedId:"node/skill/multiple-progress/_partial-fork",id:"node/skill/multiple-progress/_partial-fork",isDocsHomePage:!1,title:"_partial-fork",description:"fork\u7528\u6237\u5f00\u542fNodeJS\u5e94\u7528\uff0c\u4e5f\u5c31\u662f\u6267\u884cNodeJS\u811a\u672c\u6587\u4ef6\uff0c\u884d\u751f\u7684 Node.js \u5b50\u8fdb\u7a0b\u72ec\u7acb\u4e8e\u7236\u8fdb\u7a0b\uff0c \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u5b58\uff0c\u5177\u6709\u81ea\u5df1\u7684 V8 \u5b9e\u4f8b\u3002 \u7531\u4e8e\u9700\u8981\u989d\u5916\u7684\u8d44\u6e90\u5206\u914d\uff0c\u4e0d\u5efa\u8bae\u884d\u751f\u5927\u91cf\u5b50 Node.js \u8fdb\u7a0b\u3002",source:"@site/docs/node/skill/multiple-progress/_partial-fork.md",slug:"/node/skill/multiple-progress/_partial-fork",permalink:"/docs/node/skill/multiple-progress/_partial-fork",version:"current"},l=[],i={rightToc:l};function s({components:e,...n}){return Object(a.b)("wrapper",Object(r.a)({},i,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("inlineCode",{parentName:"p"},"fork"),"\u7528\u6237\u5f00\u542f",Object(a.b)("inlineCode",{parentName:"p"},"NodeJS"),"\u5e94\u7528\uff0c\u4e5f\u5c31\u662f\u6267\u884c",Object(a.b)("inlineCode",{parentName:"p"},"NodeJS"),"\u811a\u672c\u6587\u4ef6\uff0c\u884d\u751f\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u5b50\u8fdb\u7a0b\u72ec\u7acb\u4e8e\u7236\u8fdb\u7a0b\uff0c \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u5b58\uff0c\u5177\u6709\u81ea\u5df1\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"V8")," \u5b9e\u4f8b\u3002 \u7531\u4e8e\u9700\u8981\u989d\u5916\u7684\u8d44\u6e90\u5206\u914d\uff0c\u4e0d\u5efa\u8bae\u884d\u751f\u5927\u91cf\u5b50 ",Object(a.b)("inlineCode",{parentName:"p"},"Node.js")," \u8fdb\u7a0b\u3002")),Object(a.b)("p",null,Object(a.b)("img",{alt:"child_process_fork",src:t(397).default})),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"demo"),"\u5982\u4e0b\uff1a"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// main.js\nconst { fork } = require('child_process')\nconst child_process_fork = fork('./child.js', ['development', '9999'], { env: { Debug: true } })\n\n// child.js\nconst args = process.argv[3] // 9999\nconst env = process.env.Debug // true\n")),Object(a.b)("h4",{id:"options"},"options"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"http://nodejs.cn/api/child_process.html#child_processforkmodulepath-args-options"}),"\u5b8c\u6574 options \u5217\u8868"))))}s.isMDXComponent=!0}}]);