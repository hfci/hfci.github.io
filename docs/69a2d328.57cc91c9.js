(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{189:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return o})),a.d(n,"metadata",(function(){return c})),a.d(n,"rightToc",(function(){return r})),a.d(n,"default",(function(){return s}));var t=a(2),l=(a(0),a(361));const o={id:"webpackTapable",title:"tapable",hide_title:!0,sidebar_label:"tapable"},c={unversionedId:"enginee/webpack/webpackTapable",id:"enginee/webpack/webpackTapable",isDocsHomePage:!1,title:"tapable",description:"\u7b80\u4ecb",source:"@site/docs/enginee/webpack/tapable.md",slug:"/enginee/webpack/webpackTapable",permalink:"/docs/enginee/webpack/webpackTapable",version:"current",sidebar_label:"tapable",sidebar:"babeldoc",previous:{title:"webpack \u7f16\u8bd1\u6d41\u7a0b",permalink:"/docs/enginee/webpack/webpackCompileProcess"},next:{title:"Module federation",permalink:"/docs/enginee/webpack/webpackModuleFederation"}},r=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",children:[]},{value:"sync \u540c\u6b65\u7c7b\u578b",id:"sync-\u540c\u6b65\u7c7b\u578b",children:[{value:"1. SyncHook \u94a9\u5b50",id:"1-synchook-\u94a9\u5b50",children:[]},{value:"2. SyncBailHook \u94a9\u5b50",id:"2-syncbailhook-\u94a9\u5b50",children:[]},{value:"3. SyncWaterfall \u94a9\u5b50",id:"3-syncwaterfall-\u94a9\u5b50",children:[]},{value:"4. SyncLoopHook \u94a9\u5b50",id:"4-syncloophook-\u94a9\u5b50",children:[]}]},{value:"async \u5f02\u6b65\u94a9\u5b50",id:"async-\u5f02\u6b65\u94a9\u5b50",children:[{value:"1. AsyncParallelHook \u94a9\u5b50",id:"1-asyncparallelhook-\u94a9\u5b50",children:[]},{value:"2. AsyncParallelBailHook \u94a9\u5b50",id:"2-asyncparallelbailhook-\u94a9\u5b50",children:[]},{value:"3. AsyncSeriesHook \u94a9\u5b50",id:"3-asyncserieshook-\u94a9\u5b50",children:[]},{value:"4. AsyncSeriesBailHook \u94a9\u5b50",id:"4-asyncseriesbailhook-\u94a9\u5b50",children:[]},{value:"5. AsyncSeriesWaterfalHook \u94a9\u5b50",id:"5-asyncserieswaterfalhook-\u94a9\u5b50",children:[]}]}],i={rightToc:r};function s({components:e,...n}){return Object(l.b)("wrapper",Object(t.a)({},i,n,{components:e,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"tapable")," \u63a7\u5236\u4e00\u7cfb\u5217\u6ce8\u518c\u4e8b\u4ef6\u4e4b\u95f4\u7684\u6267\u884c\u6d41\u673a\u5236\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u9ad8\u9636\u7248\u7684 ",Object(l.b)("inlineCode",{parentName:"li"},"event"),"."),Object(l.b)("li",{parentName:"ul"},"\u5206\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"\u540c\u6b65")," \u548c ",Object(l.b)("inlineCode",{parentName:"li"},"\u5f02\u6b65"),"\uff0c\u7136\u540e ",Object(l.b)("inlineCode",{parentName:"li"},"\u5f02\u6b65")," \u91cc\u9762\u53c8\u5206\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"\u4e32\u884c")," \u548c ",Object(l.b)("inlineCode",{parentName:"li"},"\u5e76\u884c"),"\uff0c\u5f53\u7136 ",Object(l.b)("inlineCode",{parentName:"li"},"\u540c\u6b65")," \u7684\u53ea\u80fd\u662f ",Object(l.b)("inlineCode",{parentName:"li"},"\u4e32\u884c"),".")),Object(l.b)("p",null,Object(l.b)("img",{alt:"Tapable",src:a(597).default})),Object(l.b)("h2",{id:"sync-\u540c\u6b65\u7c7b\u578b"},"sync \u540c\u6b65\u7c7b\u578b"),Object(l.b)("h3",{id:"1-synchook-\u94a9\u5b50"},"1. SyncHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u6309\u7167\u6ce8\u518c\u7684\u5148\u540e\u987a\u5e8f\u6267\u884c"),Object(l.b)("li",{parentName:"ul"},"\u53ea\u80fd\u901a\u8fc7 ",Object(l.b)("inlineCode",{parentName:"li"},"tap")," \u6ce8\u518c\uff0c",Object(l.b)("inlineCode",{parentName:"li"},"call")," \u89e6\u53d1\u4e8b\u4ef6")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx"}),"import { SyncHook } from 'tapable'\n\nconst syncHook = new SyncHook<Array<string>>(['name', 'age', 'height'])\n\nsyncHook.tap('plugin1', (name, age, height) => {\n  console.log('plugin1', name, age, height)\n})\n\nsyncHook.tap('plugin2', (name, age, height) => {\n  console.log('plugin2', name, age, height)\n})\n\nsyncHook.call('1', '2', '3')\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"SyncHooks",src:a(598).default})),Object(l.b)("h3",{id:"2-syncbailhook-\u94a9\u5b50"},"2. SyncBailHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"bail\uff1a[be\u026al] \u4fdd\u91ca")),Object(l.b)("li",{parentName:"ul"},"\u6309\u7167\u6ce8\u518c\u7684\u5148\u540e\u987a\u5e8f\u6267\u884c\uff0c\u524d\u9762\u5982\u679c\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\u4e0d\u4e3a\u7a7a\uff0c\u5219\u8df3\u8fc7\u5269\u4f59\u7684\u4e8b\u4ef6\u3002")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx",metastring:"{9}","{9}":!0}),"import { SyncBailHook } from 'tapable'\nconst syncHook = new SyncBailHook(['name'])\n\nsyncHook.tap('plugin1', (name) => {\n  console.log('plugin1', name)\n})\nsyncHook.tap('plugin2', (name) => {\n  console.log('plugin2', name)\n  return 'name'\n})\nsyncHook.tap('plugin3', (name) => {\n  console.log('plugin3', name)\n})\n\nsyncHook.call('hfc')\n")),Object(l.b)("p",null,"\u7b2c\u4e8c\u4e2a\u6ce8\u518c\u4e8b\u4ef6\u56e0\u4e3a\u8fd4\u56de\u4e86\u4e0d\u4e3a ",Object(l.b)("inlineCode",{parentName:"p"},"undefined")," \u7684\u503c\uff0c\u6240\u4ee5\u540e\u9762\u7684\u4e8b\u4ef6\u4e0d\u4f1a\u7ee7\u7eed\u6267\u884c\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"SyncBailHook",src:a(599).default})),Object(l.b)("h3",{id:"3-syncwaterfall-\u94a9\u5b50"},"3. SyncWaterfall \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"waterfall\uff1a[\u02c8w\u0254\u02d0t\u0259f\u0254\u02d0l] \u7011\u5e03")),Object(l.b)("li",{parentName:"ul"},"\u4e32\u884c\u6267\u884c\uff0c\u4e0a\u4e00\u4e2a\u4e8b\u4ef6\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u4e8b\u4ef6")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx"}),"import { SyncWaterfallHook } from 'tapable'\nconst syncHook = new SyncWaterfallHook(['name'])\n\nsyncHook.tap('plugin1', (name) => {\n  console.log('plugin1', name)\n  return 1\n})\nsyncHook.tap('plugin2', (name) => {\n  console.log('plugin2', name)\n  return 2\n})\n\nsyncHook.tap('plugin3', (name) => {\n  console.log('plugin3', name)\n})\n\nsyncHook.call('hfc')\n")),Object(l.b)("p",null,"\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u5165\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"SyncWaterfallHook",src:a(600).default})),Object(l.b)("h3",{id:"4-syncloophook-\u94a9\u5b50"},"4. SyncLoopHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u4e8b\u4ef6\u53ea\u8981\u6709\u8fd4\u56de\u503c\uff0c\u5c31\u4f1a\u4e00\u76f4\u5faa\u73af ",Object(l.b)("inlineCode",{parentName:"li"},"\u8be5\u4e8b\u4ef6\u4e4b\u524d\u6ce8\u518c\u7684\u6240\u6709\u4e8b\u4ef6\uff0c\u4ee5\u53ca\u8be5\u4e8b\u4ef6"))),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx",metastring:"{9}","{9}":!0}),"import { SyncLoopHook } from 'tapable'\nconst syncHook = new SyncLoopHook(['name'])\n\nsyncHook.tap('plugin1', (name) => {\n  console.log('plugin1', name)\n})\nsyncHook.tap('plugin2', (name) => {\n  console.log('plugin2', name)\n  return 2\n})\n\nsyncHook.tap('plugin3', (name) => {\n  console.log('plugin3', name)\n})\n\nsyncHook.call('hfc')\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"SyncLoopHook",src:a(601).default})),Object(l.b)("h2",{id:"async-\u5f02\u6b65\u94a9\u5b50"},"async \u5f02\u6b65\u94a9\u5b50"),Object(l.b)("h3",{id:"1-asyncparallelhook-\u94a9\u5b50"},"1. AsyncParallelHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"parrallel\uff1a[\u02c8p\xe6r\u0259lel] \u5e73\u884c\u7684\uff1b\u76f8\u540c\u7684")),Object(l.b)("li",{parentName:"ul"},"\u5f02\u6b65\u5e76\u884c\u94a9\u5b50")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx"}),"import { AsyncParallelHook } from 'tapable'\n\nconst syncHook = new AsyncParallelHook(['name'])\n\nsyncHook.tapAsync('plugin1', (name, done) => {\n  setTimeout(() => {\n    console.log(new Date().getTime())\n    done()\n  }, 1000)\n})\nsyncHook.tapAsync('plugin2', (name, done) => {\n  setTimeout(() => {\n    console.log(new Date().getTime())\n    done()\n  }, 1000)\n})\n\nsyncHook.callAsync('hfc', () => {\n  console.log('\u6267\u884c\u5b8c\u6210')\n})\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"AsyncParallelHook",src:a(602).default})),Object(l.b)("p",null,"\u53ef\u4ee5\u770b\u5230\u4e24\u4e2a\u4e8b\u4ef6\u6253\u5370\u7684\u65f6\u95f4\u662f\u76f8\u540c\u7684\uff0c\u8bf4\u660e\u662f\u540c\u4e00\u65f6\u523b\u6267\u884c\u6ce8\u518c ",Object(l.b)("inlineCode",{parentName:"p"},"setTimemout")," \u4e8b\u4ef6"),Object(l.b)("h3",{id:"2-asyncparallelbailhook-\u94a9\u5b50"},"2. AsyncParallelBailHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u524d\u9762\u5df2\u7ecf\u770b\u4e86 ",Object(l.b)("inlineCode",{parentName:"li"},"SyncBailHook"),"\uff0c\u77e5\u9053\u5e26 ",Object(l.b)("inlineCode",{parentName:"li"},"Bail")," \u7684\u529f\u80fd\u5c31\u662f\u5f53\u4e00\u4e2a\u4efb\u52a1\u8fd4\u56de\u4e0d\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"undefined")," \u7684\u65f6\u5019\uff0c\u963b\u65ad\u540e\u9762\u4efb\u52a1\u7684\u6267\u884c\u3002\u4f46\u662f\u7531\u4e8e  ",Object(l.b)("inlineCode",{parentName:"li"},"Parallel")," \u4efb\u52a1\u90fd\u662f\u540c\u65f6\u5f00\u59cb\u7684\uff0c\u963b\u65ad\u662f\u963b\u65ad\u4e0d\u4e86\u4e86\uff0c\u5b9e\u9645\u6548\u679c\u662f\u5982\u679c\u6709\u4e00\u4e2a\u4efb\u52a1\u8fd4\u56de\u4e86\u4e0d\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"undefined")," \u7684\u503c\uff0c\u6700\u7ec8\u7684 ",Object(l.b)("inlineCode",{parentName:"li"},"\u56de\u8c03\u4f1a\u7acb\u5373\u6267\u884c")," \uff0c\u5e76\u4e14\u83b7\u53d6 ",Object(l.b)("inlineCode",{parentName:"li"},"Bail")," \u4efb\u52a1\u7684\u8fd4\u56de\u503c\u3002")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx",metastring:"{15}","{15}":!0}),"const { AsyncParallelBailHook } = require('tapable')\nconst accelerate = new AsyncParallelBailHook(['newSpeed'])\n\naccelerate.tapAsync('LoggerPlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('LoggerPlugin')\n    done()\n  }, 1000)\n})\n\naccelerate.tapAsync('OverspeedPlugin', (newSpeed, done) => {\n  // 2\u79d2\u540e\u68c0\u6d4b\u662f\u5426\u8d85\u901f\n  setTimeout(() => {\n    console.log('OverspeedPlugin')\n    done(new Error('\u53d1\u751f\u9519\u8bef'), '\u6267\u884c\u7ed3\u679c')\n  }, 2000)\n})\n\naccelerate.tapAsync('DamagePlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('DamagePlugin')\n    done()\n  }, 3000)\n})\n\naccelerate.callAsync(500, (error, data) => {\n  if (error) {\n    console.log('\u4efb\u52a1\u6267\u884c\u51fa\u9519\uff1a', error, data)\n  } else {\n    console.log('\u4efb\u52a1\u5168\u90e8\u5b8c\u6210', data)\n  }\n})\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"AsyncParallelBailHook",src:a(603).default})),Object(l.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(l.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u8981\u6ce8\u610f\u7684\u662f\uff1a\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\uff0c\u7b2c\u4e00\u4e2a\u662f ",Object(l.b)("inlineCode",{parentName:"p"},"error"),"\uff0c\u7b2c\u4e8c\u4e2a\u662f\u4e8b\u4ef6\u7684\u8fd4\u56de\u503c\uff0c\u5982\u679c ",Object(l.b)("inlineCode",{parentName:"p"},"error")," \u6709\u503c\uff0c\u90a3\u4e48 ",Object(l.b)("inlineCode",{parentName:"p"},"data")," \u5c31\u6ca1\u6709\u503c"))),Object(l.b)("h3",{id:"3-asyncserieshook-\u94a9\u5b50"},"3. AsyncSeriesHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"series\uff1a[\u02c8s\u026a\u0259ri\u02d0z]\uff1a\u8fde\u7eed")),Object(l.b)("li",{parentName:"ul"},"\u5f02\u6b65\u4e32\u884c\u94a9\u5b50")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx",metastring:"{13}","{13}":!0}),"const { AsyncSeriesHook } = require('tapable')\nconst accelerate = new AsyncSeriesHook(['newSpeed'])\n\naccelerate.tapAsync('LoggerPlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('LoggerPlugin', Date.now())\n    done()\n  }, 1000)\n})\naccelerate.tapAsync('OverspeedPlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('OverspeedPlugin', Date.now())\n    done(new Error('\u53d1\u751f\u9519\u8bef'), '\u6267\u884c\u7ed3\u679c')\n  }, 2000)\n})\naccelerate.tapAsync('DamagePlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('DamagePlugin', Date.now())\n    done()\n  }, 3000)\n})\n\naccelerate.callAsync(500, (error, data) => {\n  if (error) {\n    console.log('\u4efb\u52a1\u6267\u884c\u51fa\u9519\uff1a', error, data)\n  } else {\n    console.log('\u4efb\u52a1\u5168\u90e8\u5b8c\u6210', data)\n  }\n})\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"AsyncSeriesHook",src:a(604).default})),Object(l.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(l.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"\u53ef\u4ee5\u770b\u5230\u524d\u9762\u7684\u4e8b\u4ef6\u5982\u679c\u629b\u51fa\u9519\u8bef\uff0c\u540e\u7eed\u7684\u4e8b\u4ef6\u5c06\u4e0d\u518d\u6267\u884c\u800c\u4e14\u6700\u7ec8\u7684\u56de\u8c03\u4f1a\u7acb\u5373\u6267\u884c\u3002"))),Object(l.b)("h3",{id:"4-asyncseriesbailhook-\u94a9\u5b50"},"4. AsyncSeriesBailHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u5f02\u6b65\u4e32\u884c\u94a9\u5b50\u52a0\u4e0a\u4e86 ",Object(l.b)("inlineCode",{parentName:"li"},"bail")," \u7684\u903b\u8f91\uff0c\u4efb\u4f55\u4e00\u4e2a\u4e8b\u4ef6\u8fd4\u56de\u4e86\u4e0d\u4e3a ",Object(l.b)("inlineCode",{parentName:"li"},"undefined")," \u90a3\u4e48\u540e\u7eed\u7684\u4e8b\u4ef6\u4e0d\u518d\u6267\u884c\uff0c\u76f4\u63a5\u6267\u884c\u6700\u7ec8\u7ed3\u679c\u3002")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx",metastring:"{15}","{15}":!0}),"const { AsyncSeriesBailHook } = require('tapable')\n\nconst accelerate = new AsyncSeriesBailHook(['newSpeed'])\n\naccelerate.tapAsync('LoggerPlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('LoggerPlugin', Date.now())\n    done()\n  }, 1000)\n})\n\naccelerate.tapAsync('OverspeedPlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('OverspeedPlugin', Date.now())\n    done('\u6267\u884c\u7ed3\u679c')\n  }, 2000)\n})\n\naccelerate.tapAsync('DamagePlugin', (newSpeed, done) => {\n  setTimeout(() => {\n    console.log('DamagePlugin', Date.now())\n    done()\n  }, 3000)\n})\n\naccelerate.callAsync(500, (data) => {\n  console.log(data)\n})\n")),Object(l.b)("p",null,Object(l.b)("img",{alt:"AsyncSeriesBailHook",src:a(605).default})),Object(l.b)("h3",{id:"5-asyncserieswaterfalhook-\u94a9\u5b50"},"5. AsyncSeriesWaterfalHook \u94a9\u5b50"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u5f02\u6b65\u4e32\u884c\u94a9\u5b50\uff0c\u52a0\u4e0a\u4e86 ",Object(l.b)("inlineCode",{parentName:"li"},"waterfal")," \u903b\u8f91\uff0c\u524d\u9762\u4e8b\u4ef6\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u8fd4\u56de\u7ed9\u540e\u9762\u7684\u4e8b\u4ef6")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-tsx"}),"const { AsyncSeriesWaterfallHook } = require('tapable')\n\nconst accelerate = new AsyncSeriesWaterfallHook(['newSpeed'])\n\naccelerate.tapAsync('LoggerPlugin', (result, done) => {\n  setTimeout(() => {\n    console.log('LoggerPlugin', Date.now(), result)\n    done(null, result + 100)\n  }, 1000)\n})\n\naccelerate.tapAsync('OverspeedPlugin', (result, done) => {\n  setTimeout(() => {\n    console.log('OverspeedPlugin', Date.now(), result)\n    done(null, result + 100)\n  }, 2000)\n})\n\naccelerate.tapAsync('DamagePlugin', (result, done) => {\n  setTimeout(() => {\n    console.log('DamagePlugin', Date.now(), result)\n    done(null, result + 100)\n  }, 3000)\n})\n\naccelerate.callAsync(500, (error, data) => {\n  console.log(error, data)\n})\n")),Object(l.b)("p",null,"\u6267\u884c\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),Object(l.b)("p",null,Object(l.b)("img",{alt:"AsyncSeriesWaterfalHook",src:a(606).default})))}s.isMDXComponent=!0},361:function(e,n,a){"use strict";a.d(n,"a",(function(){return p})),a.d(n,"b",(function(){return m}));var t=a(0),l=a.n(t);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function c(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?c(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=l.a.createContext({}),b=function(e){var n=l.a.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},p=function(e){var n=b(e.components);return l.a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return l.a.createElement(l.a.Fragment,{},n)}},d=l.a.forwardRef((function(e,n){var a=e.components,t=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),p=b(a),d=t,m=p["".concat(c,".").concat(d)]||p[d]||u[d]||o;return a?l.a.createElement(m,r(r({ref:n},s),{},{components:a})):l.a.createElement(m,r({ref:n},s))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=a.length,c=new Array(o);c[0]=d;var r={};for(var i in n)hasOwnProperty.call(n,i)&&(r[i]=n[i]);r.originalType=e,r.mdxType="string"==typeof e?e:t,c[1]=r;for(var s=2;s<o;s++)c[s]=a[s];return l.a.createElement.apply(null,c)}return l.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"},597:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/Tapable-133167908fd71e933a264a1405fa41c0.png"},598:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/synchooks-835fed6f395ae8d938196a12f9580c36.png"},599:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/syncbailhook-4294630ea200eba3f88610c5644932f2.png"},600:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/syncwaterfallhook-de30cf701b06359e7315d79d90e41ef2.png"},601:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/syncloophook-47f054b48705f47742825cd6cd5f7e03.png"},602:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/asyncparrallelhook-4a5c840e4555d70cae686c66c7a04c54.png"},603:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/asyncparalelbailhook-5c2e3426f26ebd14e26f0212fcb756b1.png"},604:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/asyncserieshook-bba5abd946fe4110c7d7636043901371.png"},605:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/asyncseriesbailhook-95471c0e9cf07a75789d21cade9cf8b7.png"},606:function(e,n,a){"use strict";a.r(n),n.default=a.p+"assets/images/asyncserieswaterfalhook-9ee6e547f89e4fd67d2b6880ebcf1651.png"}}]);