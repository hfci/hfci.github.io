(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{313:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return p}));var r=t(2),a=t(7),c=(t(0),t(361)),o={id:"reactIOC",title:"react \u63a7\u5236\u53cd\u8f6c",hide_title:!0,sidebar_label:"\u63a7\u5236\u53cd\u8f6c\uff08IOC\uff09"},l={unversionedId:"react/goods/reactIOC",id:"react/goods/reactIOC",isDocsHomePage:!1,title:"react \u63a7\u5236\u53cd\u8f6c",description:"\u7406\u89e3\u63a7\u5236\u53cd\u8f6c",source:"@site/docs/react/goods/IOC.md",slug:"/react/goods/reactIOC",permalink:"/docs/react/goods/reactIOC",version:"current",sidebar_label:"\u63a7\u5236\u53cd\u8f6c\uff08IOC\uff09",sidebar:"reactdoc",previous:{title:"react \u6280\u5de7",permalink:"/docs/react/goods/reactSkill"},next:{title:"react \u6301\u4e45\u5316\u72b6\u6001",permalink:"/docs/react/goods/reactPersistedState"}},i=[{value:"\u7406\u89e3\u63a7\u5236\u53cd\u8f6c",id:"\u7406\u89e3\u63a7\u5236\u53cd\u8f6c",children:[]},{value:"react \u4e2d\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c",id:"react-\u4e2d\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c",children:[{value:"render props",id:"render-props",children:[]},{value:"Compound Components \u590d\u5408\u7ec4\u4ef6",id:"compound-components-\u590d\u5408\u7ec4\u4ef6",children:[]},{value:"state reducer",id:"state-reducer",children:[]}]}],u={rightToc:i};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"\u7406\u89e3\u63a7\u5236\u53cd\u8f6c"},"\u7406\u89e3\u63a7\u5236\u53cd\u8f6c"),Object(c.b)("p",null,"\u901a\u4fd7\u70b9\u7406\u89e3\uff1alibrary \u672c\u6765\u662f\u4f9b\u4f7f\u7528\u8005\u8c03\u7528\u7684\uff0c\u4f46\u662f library \u53cd\u8fc7\u6765\u8c03\u7528\u4f7f\u7528\u8005\u7684\u4ee3\u7801\u6765\u5b9e\u73b0\u67d0\u4e2a\u529f\u80fd"),Object(c.b)("blockquote",null,Object(c.b)("ol",{parentName:"blockquote"},Object(c.b)("li",{parentName:"ol"},"\u6a21\u5757\u95f4\u7684\u4f9d\u8d56\u5e94\u8be5\u90fd\u662f\u901a\u8fc7",Object(c.b)("inlineCode",{parentName:"li"},"\u62bd\u8c61"),"\u53d1\u751f\u7684\uff0c\u9ad8\u5c42\u5b9a\u4e49\u597d\u4f9d\u8d56\u7684\u62bd\u8c61\uff0c\u7136\u540e\u4f4e\u5c42\u53bb\u5b9e\u73b0\u8fd9\u4e2a\u62bd\u8c61"),Object(c.b)("li",{parentName:"ol"},"\u5c01\u88c5\u7684\u6a21\u5757\u5e94\u8be5\u505a\u66f4\u5c11\u7684\u4e8b\u60c5\uff0c\u5177\u4f53\u7684\u4e8b\u60c5\u5e94\u8be5\u662f\u4f7f\u7528\u8005\u53bb\u505a"),Object(c.b)("li",{parentName:"ol"},"\u5177\u4f53\u4e1a\u52a1\u4f7f\u7528\u62bd\u8c61\u7684\u65f6\u5019\uff0c\u5e94\u8be5\u57fa\u4e8e\u62bd\u8c61\u518d\u5c01\u88c5\u4e00\u4e0b\u8fd9\u4e2a\u4e1a\u52a1\u5177\u4f53\u8981\u505a\u7684\u4e8b\u60c5"))),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\u5f53\u4f9d\u8d56\u7684\u662f\u6a21\u5757\u7684\u5177\u4f53\u5b9e\u73b0\u4e4b\u540e\uff0c\u5c31\u4f1a\u53d1\u751f\uff1a\u5982\u679c\u4f4e\u5c42\u7684\u5176\u4e2d\u4e00\u5c42\u53d1\u751f\u4e86\u53d8\u52a8\uff0c\u90a3\u4e48\u4ed6\u7684\u6240\u6709\u4e0a\u5c42\u90fd\u9700\u8981\u53d1\u751f\u53d8\u52a8\uff0c\u5982\u679c\u9ad8\u5c42\u4f9d\u8d56\u7684\u662f\u62bd\u8c61\u63a5\u53e3\uff0c\u90a3\u4e48\u4f4e\u5c42\u53ea\u8981\u8fd9\u4e2a\u62bd\u8c61\u7684\u63a5\u53e3\u4e0d\u52a8\uff0c\u9ad8\u5c42\u5c31\u80fd\u6b63\u5e38\u4f7f\u7528\u3002")),Object(c.b)("p",null,"\u4e3e\u4f8b\uff0c\u6bd4\u5982\u73b0\u5728\u8981\u5c01\u88c5\u4e00\u4e2a",Object(c.b)("inlineCode",{parentName:"p"},"\u8fc7\u6ee4\u6570\u7ec4\u4e2d\u5305\u542bundefined\u548cnull\u6570\u636e"),"\u65b9\u6cd5\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"function filter(array) {\n  let newArray = []\n  for (let index = 0; index < array.length; index++) {\n    const element = array[index]\n    // \u6392\u9664undefine\u548cnull\n    // highlight-next-line\n    if (element !== null && element !== undefined) {\n      newArray[newArray.length] = element\n    }\n  }\n  return newArray\n}\nfilter([0, 1, undefined, 2, null, 3, 'four', ''])\n")),Object(c.b)("p",null,"\u6709\u4e00\u5929\u9700\u6c42\u53d8\u4e86\uff0c\u8fd8\u8981",Object(c.b)("inlineCode",{parentName:"p"},"\u7a7a\u5b57\u7b26\u4e32\u6570\u636e")),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="\u52a0\u5f3a\u4e86\u5c01\u88c5\uff0c\u6dfb\u52a0\u4e00\u4e9b\u914d\u7f6e\u9009\u9879"',title:'"\u52a0\u5f3a\u4e86\u5c01\u88c5\uff0c\u6dfb\u52a0\u4e00\u4e9b\u914d\u7f6e\u9009\u9879"'}),"function filter(\n  array,\n  {filterNull = true, filterUndefined = true, filterZero = false, filterEmptyString = false} = {}\n) {\n  let newArray = []\n  for (let index = 0; index < array.length; index++) {\n    const element = array[index]\n    if (\n      (filterNull && element === null) ||\n      (filterUndefined && element === undefined) ||\n      (filterZero && element === 0) ||\n      (filterEmptyString && element === '')\n    ) {\n      continue\n    }\n\n    newArray[newArray.length] = element\n  }\n  return newArray\n}\n")),Object(c.b)("p",null,"\u4e0a\u9762\u7684\u5c01\u88c5\u867d\u7136\u5b9e\u73b0\u4e86\u529f\u80fd\uff0c\u4f46\u662f\u54ea\u4e00\u5929\u5982\u679c\u9700\u6c42\u53d8\u4e86\uff0c\u53c8\u8981\u8fc7\u6ee4\u5176\u4ed6\u6570\u636e\uff0c\u800c\u4f60\u5c01\u88c5\u7684\u662f\u4e00\u4e2a library\uff0c\u90a3\u4f60\u9700\u8981\u66f4\u6539\u4ee3\u8868\u7136\u540e\u53d1\u5305\u4f9b\u4f7f\u7528\u8005\u4f7f\u7528\u3002"),Object(c.b)("p",null,"\u6700\u4f73\u5b9e\u8df5\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="library\u63d0\u4f9b\u5c11\u7684\u529f\u80fd\uff0c\u62bd\u8c61\u5177\u4f53\u7684\u903b\u8f91\uff0c\u8ba9\u4f7f\u7528\u8005\u53bb\u505a\u5177\u4f53\u7684\u903b\u8f91"',title:'"library\u63d0\u4f9b\u5c11\u7684\u529f\u80fd\uff0c\u62bd\u8c61\u5177\u4f53\u7684\u903b\u8f91\uff0c\u8ba9\u4f7f\u7528\u8005\u53bb\u505a\u5177\u4f53\u7684\u903b\u8f91"'}),"function filter(array, filterFn) {\n  let newArray = []\n  for (let index = 0; index < array.length; index++) {\n    const element = array[index]\n    // \u4f7f\u7528\u8005\u53bb\u505a\u5177\u4f53\u7684\u8fc7\u6ee4\u6570\u636e\u903b\u8f91\n    // highlight-next-line\n    if (filterFn(element)) {\n      newArray[newArray.length] = element\n    }\n  }\n  return newArray\n}\n\nfilter([0, 1, undefined, 2, null, 3, 'four', ''], el => el !== null && el !== undefined)\n")),Object(c.b)("h2",{id:"react-\u4e2d\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c"},"react \u4e2d\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c"),Object(c.b)("h3",{id:"render-props"},"render props"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\u63a5\u6536\u4e00\u4e2a prop \u662f function \u800c\u4e14\u8fd9\u4e2a function \u8fd4\u56de\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7236\u7ec4\u4ef6\u8c03\u7528\u8fd9\u4e2a function \u6e32\u67d3 function \u7684\u8fd4\u56de\u7ed3\u679c")),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="Child\u7ec4\u4ef6\u76f4\u63a5\u56fa\u5b9a\u5199\u5728Parent\u7ec4\u4ef6\u4e2d"',title:'"Child\u7ec4\u4ef6\u76f4\u63a5\u56fa\u5b9a\u5199\u5728Parent\u7ec4\u4ef6\u4e2d"'}),"function Parent() {\n  return (\n    <>\n      <Child {...prop} />\n    </>\n  )\n}\n\nfunction Child() {\n  return <div>child</div>\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="Parent\u4e0d\u76f4\u63a5\u4f9d\u8d56Child\u7ec4\u4ef6\uff0c\u800c\u662f\u4f9d\u8d56\u4e00\u4e2achildren\u7684\u5c5e\u6027\u65b9\u6cd5\uff0c\u662f\u4e00\u4e2a\u62bd\u8c61"',title:'"Parent\u4e0d\u76f4\u63a5\u4f9d\u8d56Child\u7ec4\u4ef6\uff0c\u800c\u662f\u4f9d\u8d56\u4e00\u4e2achildren\u7684\u5c5e\u6027\u65b9\u6cd5\uff0c\u662f\u4e00\u4e2a\u62bd\u8c61"'}),"function Parent(props) {\n  return <>{props.children(props)}</>\n}\n\nfunction App() {\n  return <Parent>{parentProps => <div {...parentProps}>child</div>}</Parent>\n}\n")),Object(c.b)("h3",{id:"compound-components-\u590d\u5408\u7ec4\u4ef6"},"Compound Components \u590d\u5408\u7ec4\u4ef6"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\u591a\u4e2a\u7ec4\u4ef6\u7ec4\u5408\u5728\u4e00\u8d77\u5b8c\u6210\u4e00\u9879\u529f\u80fd\uff0c\u6bd4\u5982",Object(c.b)("inlineCode",{parentName:"p"},"Select\u548cOption"))),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="Select\u6700\u521d\u8bbe\u8ba1\u601d\u8def\uff0c\u9700\u8981\u7684\u6570\u636e\u90fd\u901a\u8fc7prop\u4f20\u9012"',title:'"Select\u6700\u521d\u8bbe\u8ba1\u601d\u8def\uff0c\u9700\u8981\u7684\u6570\u636e\u90fd\u901a\u8fc7prop\u4f20\u9012"'}),"function App() {\n  return (\n    <Select\n      items={[\n        {contents: 'Download', onSelect: () => alert('Download')},\n        {contents: 'Create a Copy', onSelect: () => alert('Create a Copy')},\n        {contents: 'Delete', onSelect: () => alert('Delete')}\n      ]}\n    />\n  )\n}\n")),Object(c.b)("p",null,"\u5982\u679c\u6709\u4e2a\u4e0b\u62c9\u6846\u9700\u8981",Object(c.b)("inlineCode",{parentName:"p"},"disable"),"\uff0c\u90a3\u4e48\u9700\u8981\u4fee\u6539 items \u7684\u914d\u7f6e\u6570\u636e\uff0c\u5bfc\u81f4\u6240\u6709\u7684\u7ec4\u4ef6\u90fd\u91cd\u65b0\u6e32\u67d3\u4e00\u904d\uff0c\u518d\u6bd4\u5982\u9700\u6c42\u53d8\u4e86\uff1a\u6bcf\u4e2a\u9009\u9879 hover \u4e0a\u53bb\u9700\u8981\u6709\u4e2a",Object(c.b)("inlineCode",{parentName:"p"},"popver"),"\u6c14\u6ce1\u63d0\u793a\uff0c\u90a3\u4e48\u53c8\u9700\u8981\u4fee\u6539\u4ee3\u7801"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="\u590d\u5408\u7ec4\u4ef6\uff1a\u628a\u6e32\u67d3\u903b\u8f91\u7684\u63a7\u5236\u6743\u4ea4\u7ed9\u8c03\u7528\u8005\uff0c\u6bcf\u4e2aOption\u600e\u4e48\u5c55\u793a\u81ea\u5df1\u63a7\u5236\uff0c\u72b6\u6001\u5728\u7ec4\u4ef6\u4e4b\u95f4\u901a\u8fc7context\u9690\u5f0f\u540c\u4eab"',title:'"\u590d\u5408\u7ec4\u4ef6\uff1a\u628a\u6e32\u67d3\u903b\u8f91\u7684\u63a7\u5236\u6743\u4ea4\u7ed9\u8c03\u7528\u8005\uff0c\u6bcf\u4e2aOption\u600e\u4e48\u5c55\u793a\u81ea\u5df1\u63a7\u5236\uff0c\u72b6\u6001\u5728\u7ec4\u4ef6\u4e4b\u95f4\u901a\u8fc7context\u9690\u5f0f\u540c\u4eab"'}),"function App() {\n  return (\n    <MenuList>\n      <MenuItem onSelect={() => alert('Download')}>Download</MenuItem>\n      <MenuItem onSelect={() => alert('Copy')}>Create a Copy</MenuItem>\n      <MenuItem onSelect={() => alert('Delete')}>Delete</MenuItem>\n    </MenuList>\n  )\n}\n")),Object(c.b)("h3",{id:"state-reducer"},"state reducer"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\u81ea\u5b9a\u4e49 hook \u4e2d\uff0c\u5141\u8bb8\u4f7f\u7528\u8005\u4f20\u9012\u4e00\u4e2a reducer \u76f4\u63a5\u64cd\u63a7 hook \u7684\u72b6\u6001\uff0c",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://kentcdodds.com/blog/the-state-reducer-pattern-with-react-hooks"}),Object(c.b)("inlineCode",{parentName:"a"},"The State Reducer Pattern with React Hooks")))),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"import * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport Switch from './switch'\n\nconst actionTypes = {\n  toggle: 'TOGGLE',\n  on: 'ON',\n  off: 'OFF'\n}\n\nfunction toggleReducer(state, action) {\n  switch (action.type) {\n    case actionTypes.toggle: {\n      return {on: !state.on}\n    }\n    case actionTypes.on: {\n      return {on: true}\n    }\n    case actionTypes.off: {\n      return {on: false}\n    }\n    default: {\n      throw new Error(`Unhandled type: ${action.type}`)\n    }\n  }\n}\n\nfunction useToggle({reducer = toggleReducer} = {}) {\n  // \u4f7f\u7528\u8005\u4f20\u9012reducer\u64cd\u63a7state\n  // highlight-next-line\n  const [{on}, dispatch] = React.useReducer(reducer, {on: false})\n\n  const toggle = () => dispatch({type: actionTypes.toggle})\n  const setOn = () => dispatch({type: actionTypes.on})\n  const setOff = () => dispatch({type: actionTypes.off})\n\n  return {on, toggle, setOn, setOff}\n}\n\nfunction Toggle() {\n  const [clicksSinceReset, setClicksSinceReset] = React.useState(0)\n  const tooManyClicks = clicksSinceReset >= 4\n\n  const {on, toggle, setOn, setOff} = useToggle({\n    reducer(currentState, action) {\n      const changes = toggleReducer(currentState, action)\n      if (tooManyClicks && action.type === actionTypes.toggle) {\n        // other changes are fine, but on needs to be unchanged\n        return {...changes, on: currentState.on}\n      } else {\n        // the changes are fine\n        return changes\n      }\n    }\n  })\n\n  return (\n    <div>\n      <button onClick={setOff}>Switch Off</button>\n      <button onClick={setOn}>Switch On</button>\n      <Switch\n        onClick={() => {\n          toggle()\n          setClicksSinceReset(count => count + 1)\n        }}\n        on={on}\n      />\n      {tooManyClicks ? <button onClick={() => setClicksSinceReset(0)}>Reset</button> : null}\n    </div>\n  )\n}\n\nfunction App() {\n  return <Toggle />\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n")))}p.isMDXComponent=!0},361:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return f}));var r=t(0),a=t.n(r);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=a.a.createContext({}),p=function(e){var n=a.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=p(e.components);return a.a.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),s=p(t),b=r,f=s["".concat(o,".").concat(b)]||s[b]||d[b]||c;return t?a.a.createElement(f,l(l({ref:n},u),{},{components:t})):a.a.createElement(f,l({ref:n},u))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,o=new Array(c);o[0]=b;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<c;u++)o[u]=t[u];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);